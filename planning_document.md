# ClassStock 앱 기획서 (배포 버전 기준)

## 1. 개요 (Overview)

본 문서는 학급용 모의투자 웹 애플리케이션 'ClassStock'의 기능과 구조를 설명하는 기획 문서입니다. 'ClassStock'은 교사가 가상의 학급을 개설하고 학생들을 초대하여, 실제 주식 데이터를 기반으로 한 모의 투자를 체험하게 하는 금융 교육 도구입니다.

- **Target Users**: 초·중·고등학교 교사 및 학생
- **Core Goal**: 통제된 가상 환경에서 학생들이 주식 투자의 기본 원리를 학습하고 금융 리터러시(Financial Literacy)를 향상시키는 것.

---

## 2. 기술 스택 (Technical Stack)

- **Frontend**: React, TypeScript
- **Backend & Database**: Supabase (교사 사용자 인증, 데이터베이스, 스토리지)
- **Stock Data API**: 한국투자증권(KIS) API (국내 주식 실시간 시세 연동)

> **※ 현재 구현 상태**: 기능 구현 및 테스트를 위해 백엔드 및 데이터베이스는 React의 로컬 상태(State)로, 주가 데이터는 사전에 정의된 가상(Mock) 데이터로 운영되고 있습니다. Supabase 및 KIS API 연동은 배포 버전의 목표 사양입니다. 또한, 브라우저의 로컬 스토리지(Local Storage)가 주가 정보의 일일 업데이트 여부 및 팝업 공지 확인 여부를 기록하는 데 사용됩니다.

---

## 3. 주요 기능 상세 (Detailed Features)

'ClassStock'은 크게 '공용', '교사', '학생', '관리자' 네 가지 영역으로 구성됩니다.

### 3.1. 공용 기능 (로그인 없이 접근 가능)

#### 3.1.1. 랜딩 페이지
- 서비스의 핵심 기능(모의투자, 학급 관리, 보상 시스템 등)을 소개합니다.
- 서비스의 실제 화면을 보여주는 **포토 캐러셀**을 통해 사용자의 이해를 돕습니다.
- **팝업 공지**: 관리자가 설정한 기간 동안 중요한 공지를 팝업 형태로 표시합니다.
- 교사와 학생을 위한 시작 가이드를 제공합니다.
- 자주 묻는 질문(FAQ)과 최신 공지사항 목록을 표시합니다.
- 교사 회원가입/로그인, 학생 학급 참여, 관리자 로그인 기능을 제공하는 진입점 역할을 합니다.

#### 3.1.2. 공지사항 게시판
- 관리자가 작성한 공지사항을 목록 형태로 확인할 수 있습니다.
- 각 공지사항을 클릭하여 상세 내용을 조회할 수 있습니다.
- 관리자가 첨부한 파일(이미지, 문서 등)을 확인하고 다운로드할 수 있습니다.

#### 3.1.3. Q&A 게시판
- 서비스 이용에 대한 질문과 답변을 확인할 수 있는 게시판입니다.
- **질문하기**: **로그인한 교사**만 질문을 등록할 수 있습니다.
- **비밀글 설정**: 질문 등록 시 '비밀글' 체크박스를 통해 게시글을 비밀로 설정할 수 있습니다. 비밀글은 작성자와 관리자만 내용을 확인할 수 있습니다.

### 3.2. 교사 (Teacher)

#### 3.2.1. 회원가입 및 로그인
- 이메일/비밀번호 또는 소셜 로그인(Google)을 통해 Supabase Authentication 기반의 회원가입 및 로그인을 수행합니다.
- 비밀번호 분실 시 이메일을 통한 재설정 기능을 제공합니다.

#### 3.2.2. 학급 생성 및 관리
- **학급 생성**:
  - 학급 이름, 활동 기간, 초기 시드머니를 설정하여 새 학급을 생성합니다.
  - **거래 수수료**: 수수료 적용 여부와 수수료율(%)을 직접 설정할 수 있습니다.
- **학급 생성 제한**: 교사 계정당 최대 2개의 학급만 생성 및 운영할 수 있습니다.
- **학급 삭제**: 생성된 학급과 해당 학급에 속한 모든 학생 데이터를 영구적으로 삭제할 수 있습니다.

#### 3.2.3. 학급 상세 관리 (탭 인터페이스)
- **기본 정보**: 학생 초대를 위한 **'학급 참여 코드'**를 확인하고 복사할 수 있습니다.
- **학생 관리**:
  - 참여 학생 목록을 확인하고, 개별 학생을 학급에서 제외(삭제)할 수 있습니다.
  - 학생 명단을 일괄 등록할 수 있습니다.
  - 학생을 개별, 다중 선택 또는 전체 선택하여 **보너스**를 지급할 수 있습니다.
- **포트폴리오**:
  - 학급 내 모든 학생의 총 자산 및 투자 수익금(률) 현황을 카드 형태로 일괄 조회합니다.
  - 특정 학생의 카드를 클릭하면 해당 학생의 상세 포트폴리오(보유 주식, 거래 내역)를 모달로 확인할 수 있습니다.
- **랭킹 보드**:
  - 학급 내 학생들의 자산 순위를 실시간으로 확인합니다.
  - '총 자산' 또는 '투자 수익률' 기준으로 정렬하여 볼 수 있습니다.

### 3.3. 학생 (Student)

#### 3.3.1. 학급 참여 (로그인)
- 별도의 회원가입 절차 없이, 교사로부터 전달받은 **'학급 참여 코드'**와 학급에 등록된 **본인의 이름**을 입력하여 서비스에 로그인하고 학급에 참여합니다.

#### 3.3.2. 학생 대시보드
- **상단 정보**:
  - 학생 이름, 학급명, '활동 상태'(활동 전/중/종료)가 표시됩니다.
  - **실시간 정보 버튼**: 클릭 시 네이버 금융 페이지로 이동하여 실제 시장 정보를 참고할 수 있습니다.
  - **용어 사전 버튼**: 주식, 시드머니 등 어려운 경제 용어를 초등학생 눈높이에 맞춰 설명해주는 모달을 엽니다.
- **자산 요약 카드**: 총 자산, 보유 현금, 주식 평가액과 함께 초기 시드머니 대비 **총 손익**을 시각적으로 표시합니다.
- **탭 인터페이스**:
  - **포트폴리오**:
    - 총자산, 보유 현금, 주식 평가액 등 자산 현황을 원그래프와 함께 시각적으로 확인합니다.
    - 보유 주식별 평가금액, 매입금액, 보유 수량, 평가 손익 및 수익률을 상세하게 조회합니다.
  - **마켓**:
    - KIS API와 연동된 국내 주식 20개 종목의 현재가를 확인하고 주식을 **매수**하거나 **매도**합니다.
    - 각 종목을 클릭하면 상세 정보 모달이 열리며, **최근 10일간의 주가 변동 차트**와 기업 설명을 확인할 수 있습니다. 학생이 해당 종목을 보유한 경우, 차트에 자신의 평균 매입 단가(평단가)가 점선으로 함께 표시됩니다.
  - **거래 내역**: 자신의 모든 거래 기록(매수, 매도, 보너스)을 시간순으로 조회합니다.
  - **랭킹**:
    - 학급 내 전체 학생 랭킹을 확인합니다.
    - '총 자산' 또는 '투자 수익률' 기준으로 정렬하여 볼 수 있습니다.

### 3.4. 관리자 (Admin)

#### 3.4.1. 관리자 로그인
- 랜딩 페이지 하단(footer)의 'Admin' 링크를 통해 관리자 전용 로그인 모달에 접근합니다.
- 지정된 비밀번호로 로그인하여 관리자 대시보드로 진입합니다.

#### 3.4.2. 관리자 대시보드 (탭 인터페이스)
- **공지사항 관리**:
  - 새로운 공지사항을 작성하고 기존 공지사항을 수정/삭제합니다.
  - 공지사항 작성 시 이미지나 파일을 첨부할 수 있습니다.
- **Q&A 관리**:
  - 사용자가 등록한 모든 Q&A 게시글(비밀글 포함)을 확인합니다.
  - 각 질문에 답변을 작성하거나, 부적절한 게시글을 삭제할 수 있습니다.
- **팝업 공지 관리**:
  - 새로운 팝업 공지를 작성하고 기존 공지를 수정/삭제합니다.
  - 팝업이 노출될 시작일과 종료일을 설정할 수 있습니다.

---

## 4. 핵심 로직 (Core Logic)

- **주가 데이터 연동**:
  - (목표) 한국투자증권(KIS) API를 통해 실제 국내 주식 시세 데이터를 받아와 모의투자에 반영합니다.
  - **주가 업데이트 로직 (현재 구현)**:
    - 실제와 유사한 경험을 제공하기 위해, 주가 정보는 매일 한국시간(KST) 기준 **16시 10분 이후 최초 접속 시 1일 1회** 업데이트됩니다.
    - 브라우저의 로컬 스토리지(Local Storage)를 사용하여 당일 업데이트 여부를 기록하고, 중복 업데이트를 방지합니다.
  - **차트 데이터 (현재 구현)**:
    - 종목 상세 정보 모달에 표시되는 **최근 10일간의 주가 변동 차트**는 현재 주가를 기준으로 **가상으로 생성된 과거 데이터**를 사용하여 시각화됩니다.
- **주식 거래**:
  - 학생의 보유 현금 및 보유 주식 수량 내에서만 주문이 가능합니다.
  - 거래 시 교사가 설정한 수수료율이 적용됩니다.
- **활동 기간**:
  - 교사가 설정한 활동 시작일 00:00(KST)부터 종료일 23:59(KST)까지만 주식 거래가 가능합니다. 활동 기간 외에는 거래 버튼이 비활성화됩니다.
- **데이터 관리**:
  - (목표) 모든 사용자 정보, 학급 데이터, 거래 내역 등은 Supabase 데이터베이스에 안전하게 저장 및 관리됩니다.
  - (현재) 앱 실행 시간 동안 모든 데이터는 React의 로컬 상태(State)로 관리되며, 브라우저 새로고침 시 초기화됩니다.

---

## 5. 사용자 플로우 (User Flow)

### 5.1. 교사 플로우
1. 이메일 또는 소셜 계정으로 회원가입 및 로그인 후 대시보드 진입.
2. '새 학급 만들기'에서 정보(기간, 시드머니, 수수료 등) 입력 후 생성.
3. 생성된 '학급 참여 코드'를 학생들에게 공지.
4. '학생 관리' 탭에서 학생 명단을 등록.
5. '포트폴리오' 및 '랭킹' 탭으로 학생들의 투자 현황 모니터링.
6. '학생 관리' 탭에서 보너스 지급 등을 통해 학습 참여 독려.
7. 활동 종료 후 최종 랭킹 확인 및 교육적 피드백 제공.

### 5.2. 학생 플로우
1. 교사에게 받은 '학급 참여 코드'와 본인 이름을 입력하여 로그인 및 학급 참여.
2. 대시보드에서 자산 확인 및 투자 활동 시작.
3. '마켓' 탭에서 종목의 상세 정보와 차트를 확인 후 매수/매도.
4. '포트폴리오' 탭에서 자신의 자산 구성과 투자 성과 확인.
5. '랭킹' 탭을 통해 다른 친구들과 순위 비교.
6. '용어 사전' 버튼을 통해 모르는 경제 용어 학습.

### 5.3. 관리자 플로우
1. 랜딩 페이지 하단의 'Admin' 링크로 로그인.
2. '공지사항 관리', 'Q&A 관리', '팝업 공지 관리' 탭에서 서비스 콘텐츠 관리.
3. 사용자 문의 확인 및 답변 작성 또는 게시글 관리.